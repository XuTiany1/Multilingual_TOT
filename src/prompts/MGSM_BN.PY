USER_CHAT_TEMPLATE = "<start_of_turn>ব্যবহারকারী\n{prompt}<end_of_turn><eos>\n"
MODEL_CHAT_TEMPLATE = "<start_of_turn>মডেল\n"

# standard prompt
standard_prompt = USER_CHAT_TEMPLATE.format(
    prompt="নিম্নলিখিত গণিতের প্রশ্নের উত্তর দিন। শুধুমাত্র চূড়ান্ত উত্তরটি সংখ্যা আকারে লিখুন এবং অন্য কোনো টেক্সট যোগ করবেন না।\n"
) + "{question}\nউত্তর: " + MODEL_CHAT_TEMPLATE

# cot prompt
cot_prompt = USER_CHAT_TEMPLATE.format(
    prompt="নিম্নলিখিত গণিতের প্রশ্নের উত্তর দিন। "
           "ধাপে ধাপে চিন্তা করুন এবং আপনার চিন্তার প্রক্রিয়াটি নীচে লিখুন। "
           "শেষ লাইনটি 'উত্তর হল xxx' এই ফরম্যাটে হবে, যেখানে xxx একটি সংখ্যা।\n"
) + "প্রশ্ন: {question}\nধাপে ধাপে উত্তর:\n" + MODEL_CHAT_TEMPLATE

# propose_prompt
propose_prompt = USER_CHAT_TEMPLATE.format(
    prompt="ধরুন আপনি {lang} ভাষায় কথা বলা {n} জন স্বাধীন গণিতবিদ নিয়ে গঠিত, "
           "যারা প্রত্যেকে বহুপদী গণিত সমস্যার সমাধানের একটি অনন্য দৃষ্টিভঙ্গি রাখে।\n\n"
           "আপনার চিন্তার প্রক্রিয়া উপস্থাপন করার আগে, প্রতিটি গণিতবিদ তাদের উত্তরটি "
           "'গণিতবিদ i: ' দিয়ে শুরু করবে, যেখানে 'i' হতে পারে 1, 2, বা 3।\n\n"
           "প্রদত্ত প্রশ্ন এবং বর্তমান চিন্তার প্রক্রিয়ার উপর ভিত্তি করে, প্রতিটি গণিতবিদ স্বাধীনভাবে "
           "একটি সৃজনশীল, বৈধ এবং অনন্য পরবর্তী ধাপ তৈরি করবে। "
           "প্রতিটি ধাপের পদ্ধতি আলাদা হওয়া উচিত, বিভিন্ন গাণিতিক পদ্ধতি, সমস্যা বিভাজন, "
           "বা বিকল্প উপস্থাপনার উপর ভিত্তি করে।\n\n"
           "প্রতিটি গণিতবিদ তাদের যুক্তি সংক্ষিপ্তভাবে ব্যাখ্যা করবে এবং তারপর তাদের পরবর্তী ধাপের প্রস্তাব দেবে। "
           "তারা শুধুমাত্র তাদের প্রথম ধাপ যোগ করবে, যাতে আরও আলোচনা ও পর্যালোচনা সম্ভব হয়।\n\n"
           "যদি পূর্ববর্তী কোনো প্রসঙ্গ না থাকে, তবে এটি চিন্তার প্রক্রিয়ার সূচনা নির্দেশ করে, "
           "এবং গণিতবিদরা সমস্যার সমাধানের বিভিন্ন উপায় প্রস্তাব করবে।\n\n"
           "এই প্রক্রিয়াটি ধাপে ধাপে চলতে থাকবে যতক্ষণ না একটি চূড়ান্ত উত্তর পাওয়া যায়।\n\n"
) + "---\n" \
    "প্রশ্ন: {question}\n\n" \
    "প্রসঙ্গ (আগের চিন্তার প্রক্রিয়া, যদি থাকে):\n{current_thought_process}\n\n" \
    "সম্ভাব্য পরবর্তী ধাপের তালিকা (প্রতিটি লাইন একটি পৃথক গণিতবিদের দৃষ্টিভঙ্গি উপস্থাপন করে):\n" \
    + MODEL_CHAT_TEMPLATE

# value_prompt
value_prompt = USER_CHAT_TEMPLATE.format(
    prompt="প্রদত্ত যুক্তির ধাপটি সমস্যার সমাধানে কার্যকর অবদান রাখে কিনা তা মূল্যায়ন করুন। "
           "শুধুমাত্র 'মূল্যায়ন: নিশ্চিত', 'মূল্যায়ন: সম্ভাব্য', বা 'মূল্যায়ন: অসম্ভব' দিয়ে উত্তর দিন। "
           "কোনো ব্যাখ্যা বা অতিরিক্ত টেক্সট অন্তর্ভুক্ত করবেন না।\n\n"
           "নিম্নলিখিত তিনটি রায়ের মধ্যে একটি বেছে নিন:\n"
           "- নিশ্চিত: ধাপটি সঠিক এবং সমাধানের জন্য একটি যৌক্তিক অগ্রগতি।\n"
           "- সম্ভাব্য: ধাপটি যুক্তিসঙ্গত তবে আরও উন্নতি দরকার বা গুরুত্বপূর্ণ বিবরণ অনুপস্থিত।\n"
           "- অসম্ভব: ধাপটি ভুল, প্রাসঙ্গিক নয়, বা প্রতিষ্ঠিত সত্যের সাথে বিরোধপূর্ণ।\n\n"
           "---\n"
           "প্রশ্ন: একটি ট্রেন স্টেশন A থেকে ৫০ জন যাত্রী নিয়ে ছেড়ে গেল। পরবর্তী স্টেশনে ১৫ জন যাত্রী নেমে গেল "
           "এবং নতুন করে ৩০ জন যাত্রী উঠল। এখন ট্রেনে মোট কতজন যাত্রী আছে?\n\n"
           "প্রস্তাবিত পরবর্তী ধাপ: নিট পরিবর্তন গণনা করুন: -১৫ + ৩০।\nমূল্যায়ন: নিশ্চিত\n\n"
           "প্রস্তাবিত পরবর্তী ধাপ: পরিস্থিতিটিকে একটি সমীকরণে প্রকাশ করুন: ৫০ - ১৫ + ৩০ = x।\nমূল্যায়ন: নিশ্চিত\n\n"
           "প্রস্তাবিত পরবর্তী ধাপ: ধরে নিন যে ট্রেনটি পরবর্তী স্টেশনে ২০ জন যাত্রী হারিয়েছে এবং চূড়ান্ত সংখ্যা যাচাই করুন।\nমূল্যায়ন: অসম্ভব\n\n"
           "প্রস্তাবিত পরবর্তী ধাপ: সম্পর্কটি শতাংশ আকারে প্রকাশ করুন: (৫০ - ১৫) / ৫০।\nমূল্যায়ন: অসম্ভব\n\n"
           "প্রস্তাবিত পরবর্তী ধাপ: প্রতিটি স্টেশনে যাত্রী সংখ্যা দ্বিগুণ করার ধারণা বিবেচনা করুন।\nমূল্যায়ন: অসম্ভব\n\n"
           "প্রস্তাবিত পরবর্তী ধাপ: চূড়ান্ত সংখ্যা x ধরে নিয়ে উল্টো বিশ্লেষণ করুন।\nমূল্যায়ন: নিশ্চিত\n\n"
) + "---\n" \
    "{question}\n\n" \
    "প্রস্তাবিত পরবর্তী ধাপ: {curr_candidate}\n\n" \
    "মূল্যায়ন:" \
    + MODEL_CHAT_TEMPLATE

# Force output prompt
force_output_prompt = USER_CHAT_TEMPLATE.format(
    prompt="নীচের সমস্ত প্রসঙ্গ বিবেচনা করে, সমস্যার চূড়ান্ত উত্তর নির্ধারণ করুন।\n\n"
           "এই নিয়মগুলি কঠোরভাবে অনুসরণ করুন:\n"
           "- প্রতিটি গণনার ধাপ লিখুন এবং প্রতিটি ধাপ যৌক্তিকভাবে ব্যাখ্যা করুন।\n"
           "- প্রদত্ত প্রসঙ্গ ব্যবহার করুন এবং নিশ্চিত করুন যে প্রতিটি ধাপ যৌক্তিকভাবে সংযুক্ত।\n"
           "- প্রসঙ্গে ইতিমধ্যে থাকা ধাপগুলি পুনরাবৃত্তি করবেন না।\n"
           "- চূড়ান্ত লাইনে শুধুমাত্র সংখ্যার মাধ্যমে উত্তর দিন এবং অন্য কোনো পাঠ্য অন্তর্ভুক্ত করবেন না।\n\n"
           "প্রসঙ্গ (আগের চিন্তার প্রক্রিয়া, যদি থাকে):\n"
           "{context}\n\n"
) + "---\n" \
    "প্রশ্ন: {question}\n\n" \
    "সমাধান:\n" \
    "ধাপ ১: " \
    + MODEL_CHAT_TEMPLATE

# Choose final answer
final_judge_prompt = USER_CHAT_TEMPLATE.format(
    prompt="আপনি একজন গণিত বিচারক, যার দায়িত্ব হলো সমস্যাটির চূড়ান্ত উত্তর নির্ধারণ করা।\n\n"
           "প্রথমে, সমস্যাটির বিবরণ গভীরভাবে বিশ্লেষণ করুন। এরপর, নিচে প্রদত্ত সম্ভাব্য উত্তরের তুলনা করুন।\n"
           "প্রতিটি উত্তরের যুক্তিগুলোর মধ্যে পার্থক্য খুঁজে বের করুন এবং সর্বাধিক সঠিক উত্তরটি বেছে নিন।\n\n"
           "নিচের নিয়মগুলি অনুসরণ করুন:\n"
           "- সিদ্ধান্ত নেওয়ার আগে সমস্যাটি যৌক্তিকভাবে বিশ্লেষণ করুন।\n"
           "- যদি একাধিক সঠিক উত্তর থাকে, তবে সবচেয়ে ভাল যুক্তিযুক্ত উত্তরটি বেছে নিন।\n"
           "- যদি কোনো উত্তরে অসঙ্গতি বা গুরুত্বপূর্ণ ধাপের অনুপস্থিতি থাকে, তবে সেটি গ্রহণ করবেন না।\n"
           "- চূড়ান্ত উত্তরটি শুধুমাত্র সংখ্যা হওয়া উচিত, কোনো অতিরিক্ত পাঠ্য ছাড়া।\n\n"
           "---\n"
           "সমস্যার বিবরণ:\n"
           "{question}\n\n"
           "সম্ভাব্য উত্তর:\n"
           "{candidate_answers}\n\n"
           "---\n"
           "চূড়ান্ত উত্তর: "
) + MODEL_CHAT_TEMPLATE